/* BitChat In Browser - Global Styles */
/* Terminal aesthetic matching iOS/Android apps */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ==========================================================================
   Base Layer - Font & Root Settings
   ========================================================================== */

@layer base {
  /* Import JetBrains Mono font */
  @font-face {
    font-family: 'JetBrains Mono';
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: url('https://fonts.gstatic.com/s/jetbrainsmono/v18/tDbY2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKxjPVmUsaaDhw.woff2') format('woff2');
  }

  @font-face {
    font-family: 'JetBrains Mono';
    font-style: normal;
    font-weight: 500;
    font-display: swap;
    src: url('https://fonts.gstatic.com/s/jetbrainsmono/v18/tDbY2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKxjPVmUsaaDhw.woff2') format('woff2');
  }

  @font-face {
    font-family: 'JetBrains Mono';
    font-style: normal;
    font-weight: 700;
    font-display: swap;
    src: url('https://fonts.gstatic.com/s/jetbrainsmono/v18/tDbY2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKxjPVmUsaaDhw.woff2') format('woff2');
  }

  /* Root element settings */
  :root {
    --color-background: #0a0a0a;
    --color-surface: #1a1a1a;
    --color-primary: #00ff00;
    --color-secondary: #ff6600;
    --color-text: #e0e0e0;
    --color-muted: #666666;
    --color-error: #ff4444;
    --color-success: #00ff00;

    /* Scrollbar dimensions */
    --scrollbar-width: 8px;
    --scrollbar-thumb-radius: 4px;
  }

  /* HTML base */
  html {
    font-family: 'JetBrains Mono', 'Fira Code', 'SF Mono', monospace;
    font-size: 14px;
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  /* Body base */
  body {
    @apply bg-background text-text;
    min-height: 100vh;
    min-height: 100dvh;
    overflow-x: hidden;
  }

  /* Prevent iOS zoom on input focus */
  input, textarea, select {
    font-size: 16px;
  }

  @media (min-width: 768px) {
    input, textarea, select {
      font-size: inherit;
    }
  }
}

/* ==========================================================================
   Custom Scrollbar Styles
   ========================================================================== */

/* WebKit browsers (Chrome, Safari, Edge) */
::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
}

::-webkit-scrollbar-track {
  background: var(--color-background);
  border-radius: var(--scrollbar-thumb-radius);
}

::-webkit-scrollbar-thumb {
  background: var(--color-muted);
  border-radius: var(--scrollbar-thumb-radius);
  border: 2px solid var(--color-background);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-primary);
}

::-webkit-scrollbar-corner {
  background: var(--color-background);
}

/* Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--color-muted) var(--color-background);
}

*:hover {
  scrollbar-color: var(--color-primary) var(--color-background);
}

/* ==========================================================================
   Selection Colors
   ========================================================================== */

::selection {
  background: var(--color-primary);
  color: var(--color-background);
}

::-moz-selection {
  background: var(--color-primary);
  color: var(--color-background);
}

/* ==========================================================================
   Focus Ring Styles
   ========================================================================== */

/* Remove default focus outline */
*:focus {
  outline: none;
}

/* Custom focus ring for interactive elements */
*:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

/* Focus styles for inputs */
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 1px var(--color-primary);
}

/* Focus styles for buttons */
button:focus-visible,
[role="button"]:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

/* ==========================================================================
   Base Typography
   ========================================================================== */

@layer base {
  h1, h2, h3, h4, h5, h6 {
    @apply font-mono font-bold text-text;
  }

  h1 {
    @apply text-xl;
  }

  h2 {
    @apply text-lg;
  }

  h3 {
    @apply text-base;
  }

  a {
    @apply text-primary underline;
    text-decoration-color: transparent;
    transition: text-decoration-color 0.15s ease;
  }

  a:hover {
    text-decoration-color: var(--color-primary);
  }

  code {
    @apply font-mono bg-surface px-1 py-0.5 rounded-terminal text-primary;
  }

  pre {
    @apply font-mono bg-surface p-4 rounded-terminal overflow-x-auto;
  }

  pre code {
    @apply bg-transparent p-0;
  }
}

/* ==========================================================================
   Utility Classes
   ========================================================================== */

@layer utilities {
  /* Terminal cursor */
  .cursor-terminal {
    @apply inline-block w-2 h-4 bg-primary animate-cursor-blink;
  }

  /* Terminal glow effect */
  .glow-primary {
    text-shadow: 0 0 10px var(--color-primary);
  }

  .glow-secondary {
    text-shadow: 0 0 10px var(--color-secondary);
  }

  .glow-error {
    text-shadow: 0 0 10px var(--color-error);
  }

  /* CRT scanline effect (optional decorative) */
  .scanlines::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 1px,
      rgba(0, 0, 0, 0.05) 1px,
      rgba(0, 0, 0, 0.05) 2px
    );
    pointer-events: none;
  }

  /* Safe area padding for mobile devices */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-right {
    padding-right: env(safe-area-inset-right);
  }

  /* No scrollbar utility */
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* Text truncation */
  .truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .truncate-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

/* ==========================================================================
   Accessibility
   ========================================================================== */

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  :root {
    --color-primary: #00ff00;
    --color-text: #ffffff;
    --color-muted: #999999;
  }
}

/* ==========================================================================
   PWA-specific Styles
   ========================================================================== */

/* Prevent text selection on touch devices for app-like feel */
.app-touch {
  -webkit-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
}

/* Allow text selection on content that should be selectable */
.app-touch .selectable {
  -webkit-user-select: text;
  user-select: text;
}

/* Prevent pull-to-refresh on app shell */
.prevent-overscroll {
  overscroll-behavior: none;
}

/* Touch feedback */
.touch-feedback {
  -webkit-tap-highlight-color: rgba(0, 255, 0, 0.1);
}
